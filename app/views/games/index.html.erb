<p id="notice"><%= notice %></p>

<%= form_tag games_path, method: :get do %>
  <%= text_field_tag :query,
    params[:query],
    class: "form-control",
    placeholder: "Find a game"
  %>
  <%= submit_tag "Search", class: "btn btn-primary" %>
<% end %>

<h1>Games</h1>
<table>
  <thead>
    <tr>
      <th colspan="3"></th>
    </tr>
  </thead>
  <%= link_to 'Show games of your buddies', games_buddies_path, class: "btn btn-outline-success btn-sm" %>
  <tbody>
    <% @games.each do |game| %>
      <ul>
        <% if game.privacy != "private" || (game.privacy == "private" && game.user.friends_with?(current_user)) %>
          <li><%= game.name %></li>
          <li>Course : <%= game.course.name %></li>
          <li>By : <%= "#{game.user.first_name} #{game.user.last_name}" %></li>
          <li>Options : <%= game.options %></li>
          <li>Number of players : <%= game.number_players %></li>
          <li>Number of guests : <%= game.number_guests %></li>

          <%= link_to 'Show', game %>
          <%= link_to 'Edit', edit_game_path(game) %>
          <%= link_to 'Destroy', game, method: :delete, data: { confirm: 'Are you sure?' } %>
        <% end %>
      </ul>
    <% end %>
  </tbody>
    <h1>My upcoming Games</h1>
      <% @upcoming_games.each do |up_game| %>
        <% if @upcoming_games.empty? %>
          <tbody>
            <p>No game</p>
        <% end %>
        <% up_game.guests.each do |guest| %>
          <% if guest || up_game.user == current_user %>
            <ul>
              <li><%= up_game.name %></li>



                  <%= link_to 'Show', up_game %>
                  <%= link_to 'Edit', edit_game_path(up_game) %>
                  <%= link_to 'Destroy', up_game, method: :delete, data: { confirm: 'Are you sure?' } %>
              </ul>
            <% end %>
        <% end %>
      <% end %>
      <h1>My last Games</h1>
      <% @past_games.each do |game| %>
        <% if @past_games.empty? %>
          <tbody>
            <p>No game</p>
        <% end %>
        <% game.guests.each do |guest| %>
          <% if guest || game.user == current_user %>
            <ul>
              <li><%= game.name %></li>
                  <%= link_to 'Show', game %>
                  <%= link_to 'Edit', edit_game_path(game) %>
                  <%= link_to 'Destroy', game, method: :delete, data: { confirm: 'Are you sure?' } %>
              </ul>
            <% end %>
        <% end %>
      <% end %>
  </tbody>
<br>

<%= link_to 'New Game', new_game_path %>
